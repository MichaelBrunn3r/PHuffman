## About
This little tool is supposed to help when calculating the Huffman codes of a string by hand.
It expects you to follow this algorithm:
- Count relative probability of all unique Chars in the string and sort them alphabetically.
Making a table for reference might be useful
- Create a Huffman Tree with this algorithm:
  - The tree is going to be built from the bottom up
  1. Create leave nodes at the bottom for every char, sorted first by probability and then alphabetically
  2. Take the two smallest probabilities, starting from the left, and sum up their probabilities
  3. Add the resulting parent node with the calculated probability. It should sit right above its children
  - !!! Never reorder any nodes !!! The new parent node should not move right of any other node to its right. If the children nodes are far apart from another, put the parent above the left child
  4. Repeat from step ii until only one node is left
- Now you can calculate the Huffman codes. For every leave/char, traverse the tree from the top. Every time you go left, add a 1 to the code, if you go right, add a 0.

If you follow this algorithm correctly, your codes will match those generated by this program.
  

## Requirements
- Python3
- [prettytable](https://pypi.org/project/PrettyTable/) (only if you need pretty printed tables)

## Usage
`python huffman.py [-h] {encode,table}`<br>
Arguments:
- `{encode,table,entropy,avrg_codelen,redundancy,tree}`: The subcommand to run

#### Subcommand Encode
Encodes an input string using the Huffman Codes generated from it.

Usage: `python huffman.py encode [-h] [string] [-x]`<br>
Arguments:
- `string`: The input string to encode. Omit to use stdin instead.
- `--hex`: Set this flag so that the string will be encoded in hex instead of binary

#### Subcommand Table
Prints a table of the data resulting from generating the Huffman Codes from the input string.
Usefull as a reference for when you create Huffman Codes by hand.

Usage: `python huffman.py table [-h] [string] [-c] [-s] [-r] [-p]`<br>
Arguments:
- `string`: The input string to generate the Huffman Codes from. Omit to use stdin instead.
- `--columns COLUMNS`: A list of the columns included in the output table, in that order.
  - Structure: `(<column>{<options>})+`
  - `<options>`: A python dictionary with options for the column. <br>
    Possible options depend on column type.
  - `<column>`: The column abbreviation
    - `c`: The Huffman Codewords
      - option `hex`: Prints the codeword as a hex string 
    - `l`: The length of the Huffman Codewords
    - `o`: The absolute occurrences of each char
    - `p`: The probability of each char
      - option `f`: The format for the decimal number
- `--sort SORT`: Sort the table by this column
- `--reversed`: Sort in reverse
- `--pretty-print`: Pretty print the table using prettytable

#### Subcommand Entropy
Calculates the entropy of the input string

Usage: `huffman.py entropy [-h] [string]`<br>
Arguments:<br>
- `string`: String to calculate entropy for. Omit to use stdin

#### Subcommand Average Huffman code length
Calculates the average Huffman code length

Usage: `huffman.py avrg_codelen [-h] [string]`<br>
Arguments:<br>
- `string`: String to calculate the average Huffman code length for. Omit to use stdin

#### Subcommand Redundancy
Calculates redundancy of the Huffman encoding compared to theoretical optimal encoding (Entropy).

Usage: `huffman.py redundancy [-h] [string]`<br>
Arguments:<br>
- `string`: String to calculate the redundancy of Huffman encoding for. Omit to use stdin

### Subcommand Tree
Outputs Huffman tree of input string

Usage: `huffman.py tree [-h] [string] [-l] [-s]`
Arguments:<br>
- `string`: String to create Huffman Tree from
- `--latex`: Output as latex tree. Requires `\usepackage{forest}`
- `--style STYLE`: A python dictionary with style options for the latex tree
  - `edge-labels`: List of the names for the left and right edges
  - `cases-sep`: Seperator for the node cases. Joined result is used as node name
  - `node-options`: Additional options for all tree nodes

## Examples
- Encode string in binary:<br>
  `python huffman.py encode "huffman"`<br>
  `110100000011111010`
- Encode string in hex:<br>
  `python huffman.py encode "huffman" -x`<br>
  `340fa`
- Print table with probabilities and codewords:<br>
  `python huffman.py table "huffman" -c pc`
  ```
  a;1/7;111
  f;2/7;00
  h;1/7;110
  m;1/7;011
  n;1/7;010
  u;1/7;10
  ```
- Print pretty printed table, columns probability and codewords:<br>
  `python huffman.py table "huffman" -c pc -p`
  ```
  +-------+-----+--------------+
  | Chars |  P  | Huffman Code |
  +-------+-----+--------------+
  |   a   | 1/7 |     111      |
  |   f   | 2/7 |      00      |
  |   h   | 1/7 |     110      |
  |   m   | 1/7 |     011      |
  |   n   | 1/7 |     010      |
  |   u   | 1/7 |      10      |
  +-------+-----+--------------+
  ```
- Print pretty printed table, columns 'pc', formated probabilities, sorted reverse by probabilities:<br>
  `python .\huffman.py table "huffman" -c "p{'f':':.4f'}c" -p -s p -r`
  ```
  +-------+--------+--------------+
  | Chars |   P    | Huffman Code |
  +-------+--------+--------------+
  |   f   | 0.2857 |      00      |
  |   u   | 0.1429 |      10      |
  |   n   | 0.1429 |     010      |
  |   m   | 0.1429 |     011      |
  |   h   | 0.1429 |     110      |
  |   a   | 0.1429 |     111      |
  +-------+--------+--------------+
  ```
- Input from stdin:<br>
  `echo "huffman" | python .\huffman.py encode`<br>
  `110100000011111010`

- Print Huffman Tree:<br>
  `python .\huffman.py tree "huffman"`<br>
  ```
    ([f], 2/7)
  ([m,n,f], 4/7)
    ([n], 1/7)
    ([m,n], 2/7)
    ([m], 1/7)
  ([a,h,u,m,n,f], 1)
    ([u], 1/7)
  ([a,h,u], 3/7)
    ([h], 1/7)
    ([a,h], 2/7)
    ([a], 1/7)
  ```

- Output Huffman Tree as latex, with reference to previous tikz node style settings:<br>
  `python .\huffman.py tree "huffman" -l -s "{'node-options':'tree-node'}"`<br>
  ```
  \begin{forest}
    ...
  \end{forest}
  ```
  ![Example of latex Huffman Tree](https://github.com/MichaelBrunn3r/PHuffman/raw/master/img/huffman_tree.png)
  
